{% extends 'chat/chat.html' %}
{% block hide %}{% endblock %}
{% block messages %}

    <div class="settings-tray">
        <div class="friend-drawer no-gutters friend-drawer--grey">
            <img class="profile-image"
                 src="https://www.clarity-enhanced.net/wp-content/uploads/2020/06/robocop.jpg"
                 alt="">
            <div class="text">
                <h6>{{ message.sender }}</h6>
                <p class="text-muted">Layin' down the law since like before
                    Christ...</p>
            </div>
            <span class="settings-tray--right">
                                        			  <i class="material-icons">cached</i>
                                        			  <i class="material-icons">message</i>
                                        			  <i class="material-icons">menu</i>
                                        			</span>
        </div>
    </div>
    {% for message in messages %}
        <div class="chat-panel">
            {% if message.sender == request.user %}
                <div class="row no-gutters">
                    <div class="col-md-3 offset-md-9">
                        <div class="chat-bubble chat-bubble--right">
                            {{ message }}
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="row no-gutters">
                    <div class="col-md-3">
                        <div class="chat-bubble chat-bubble--left">
                            {{ message }}
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    {% endfor %}
    <script>
        $(function () {
            $('#user{{ receiver.id }}').addClass('active');
            //Call receive function each 1 seconds to check for new messages in the database
            setInterval(receive, 1000)
        })
    </script>
{% endblock %}
